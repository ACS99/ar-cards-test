<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Markerless AR Room</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.min.js"></script>
  </head>

  <body style="margin: 0; overflow: hidden;">
  <button id="startButton" style="
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 20px 40px;
    font-size: 18px;
    background: #000;
    color: #fff;
    border: none;
    border-radius: 10px;
    z-index: 999;">
    Start AR
  </button>

  <a-scene
    embedded
    arjs="sourceType: webcam; debugUIEnabled: false;"
    vr-mode-ui="enabled: false"
    renderer="logarithmicDepthBuffer: true;"
    device-orientation-permission-ui="enabled: true"
  >
    <a-assets>
      <a-asset-item id="room" src="models/test-tarjetas-ar1.glb"></a-asset-item>
      <audio id="birds" src="audio/bird.mp3"></audio>
    </a-assets>

    <!-- 3D model -->
    <a-entity gltf-model="#room"
              position="0 0 -2"
              scale="0.1 0.1 0.1"
              animation="property: rotation; to: 0 360 0; loop: true; dur: 60000">
    </a-entity>

    <!-- Sound (triggered on user click) -->
    <a-sound id="sound" src="#birds" autoplay="false" loop="true" positional="false"></a-sound>

    <!-- Camera -->
    <a-entity camera look-controls></a-entity>
  </a-scene>

  <script>
    document.getElementById('startButton').addEventListener('click', function () {
      // Start the audio manually
      const soundEl = document.querySelector('#sound');
      soundEl.components.sound.playSound();

      // Hide the button
      this.style.display = 'none';
    });
  </script>
</body>
</html>
